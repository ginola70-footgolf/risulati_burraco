<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Burraco Battle â™  ginola700 vs zappaclaud</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=IBM+Plex+Mono:wght@300;400;500&family=Bodoni+Moda:ital,opsz,wght@0,6..96,400;0,6..96,700;0,6..96,900;1,6..96,400;1,6..96,700&display=swap" rel="stylesheet"/>
  <style>
    /* â”€â”€ TOKENS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    :root {
      --felt:     #18322a;
      --felt-mid: #1e3d31;
      --felt-hi:  #254a3c;
      --gold:     #c8a84b;
      --gold-dim: rgba(200,168,75,0.18);
      --gold-line:rgba(200,168,75,0.35);
      --cream:    #f2ebdd;
      --cream-dim:rgba(242,235,221,0.55);
      --red:      #bf3030;
      --red-dim:  rgba(191,48,48,0.18);
      --shadow:   rgba(0,0,0,0.55);
      --radius:   10px;
    }

    /* â”€â”€ RESET / BASE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }

    body {
      background-color: var(--felt);
      background-image:
        radial-gradient(ellipse 80% 60% at 10% 5%,  rgba(37,74,60,.6) 0%, transparent 60%),
        radial-gradient(ellipse 70% 50% at 90% 95%, rgba(10,22,17,.7) 0%, transparent 55%),
        url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.018'%3E%3Cpath d='M0 0h1v1H0z'/%3E%3Cpath d='M20 20h1v1h-1z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
      min-height: 100vh;
      font-family: 'IBM Plex Mono', monospace;
      color: var(--cream);
      overflow-x: hidden;
    }

    /* â”€â”€ HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    header {
      padding: 4rem 1.5rem 2.5rem;
      text-align: center;
      position: relative;
    }
    .deco-suits {
      font-size: 1.1rem;
      letter-spacing: 1.4rem;
      color: var(--gold);
      opacity: .55;
      margin-bottom: 1.2rem;
      animation: fadeUp .7s ease both;
    }
    h1 {
      font-family: 'Bodoni Moda', serif;
      font-weight: 900;
      font-size: clamp(2.6rem, 7vw, 5.2rem);
      line-height: .96;
      color: var(--cream);
      letter-spacing: -.025em;
      animation: fadeUp .7s .08s ease both;
    }
    h1 em {
      display: block;
      font-family: 'Libre Baskerville', serif;
      font-style: italic;
      font-weight: 400;
      font-size: .44em;
      color: var(--gold);
      letter-spacing: .15em;
      margin-top: .3em;
    }
    .ornament {
      display: flex;
      align-items: center;
      gap: 1rem;
      justify-content: center;
      margin: 1.8rem auto 0;
      animation: fadeUp .7s .18s ease both;
    }
    .ornament-line {
      height: 1px;
      width: 80px;
      background: linear-gradient(90deg, transparent, var(--gold));
    }
    .ornament-line:last-child {
      background: linear-gradient(90deg, var(--gold), transparent);
    }
    .ornament-diamond { color: var(--gold); font-size: .9rem; }

    /* â”€â”€ LAST UPDATE BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .update-bar {
      text-align: center;
      font-size: .62rem;
      letter-spacing: .18em;
      text-transform: uppercase;
      color: rgba(242,235,221,.28);
      padding: .5rem 1rem 1.5rem;
    }
    .update-bar b { color: rgba(200,168,75,.6); }

    /* â”€â”€ SCOREBOARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .scoreboard {
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      max-width: 820px;
      margin: 0 auto 2.5rem;
      padding: 0 1rem;
      gap: 0;
      animation: fadeUp .7s .22s ease both;
    }

    .player-panel {
      background: linear-gradient(145deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border: 1px solid var(--gold-line);
      padding: 2.4rem 2rem 2rem;
      position: relative;
      overflow: hidden;
      transition: background .3s, transform .3s;
    }
    .player-panel::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(200,168,75,.06) 0%, transparent 55%);
      pointer-events: none;
    }
    .player-panel:first-child {
      border-radius: var(--radius) 0 0 var(--radius);
      border-right: none;
      text-align: right;
    }
    .player-panel:last-child {
      border-radius: 0 var(--radius) var(--radius) 0;
      border-left: none;
    }
    .player-panel:hover { background: rgba(255,255,255,.08); transform: scale(1.015); z-index: 2; }

    /* Corona del leader */
    .player-panel.leader::after {
      content: 'â™›';
      position: absolute;
      top: .7rem;
      font-size: 1.1rem;
      color: var(--gold);
      filter: drop-shadow(0 0 6px rgba(200,168,75,.5));
    }
    .player-panel:first-child.leader::after { right: .9rem; }
    .player-panel:last-child.leader::after  { left:  .9rem; }

    .p-nick {
      font-family: 'Bodoni Moda', serif;
      font-size: 1.45rem;
      font-weight: 700;
      color: var(--cream);
      letter-spacing: .02em;
    }
    .p-wins {
      font-size: 5rem;
      font-weight: 300;
      line-height: 1;
      color: var(--gold);
      text-shadow: 0 0 48px rgba(200,168,75,.25);
      font-variant-numeric: tabular-nums;
      margin: .25rem 0 .3rem;
      letter-spacing: -.04em;
    }
    .p-label {
      font-size: .58rem;
      letter-spacing: .22em;
      text-transform: uppercase;
      color: rgba(242,235,221,.35);
    }
    .p-extra {
      font-size: .72rem;
      color: rgba(242,235,221,.45);
      margin-top: .5rem;
    }
    .p-extra b { color: var(--gold); font-weight: 500; }

    /* Divider centrale */
    .vs-block {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,.3);
      border-top: 1px solid var(--gold-line);
      border-bottom: 1px solid var(--gold-line);
      padding: 1.2rem 1.4rem;
      min-width: 72px;
    }
    .vs-word {
      font-family: 'Libre Baskerville', serif;
      font-style: italic;
      font-size: 2rem;
      color: var(--gold);
      opacity: .5;
      line-height: 1;
    }
    .vs-count { font-size: .58rem; letter-spacing: .14em; text-transform: uppercase; color: rgba(242,235,221,.28); text-align: center; margin-top: .4rem; }
    .vs-count b { display: block; font-size: 1.2rem; color: rgba(242,235,221,.6); font-weight: 400; }

    /* â”€â”€ PROGRESS BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .progress-wrap {
      max-width: 820px;
      margin: 0 auto 3rem;
      padding: 0 1rem;
      animation: fadeUp .7s .32s ease both;
    }
    .progress-labels {
      display: flex;
      justify-content: space-between;
      font-size: .6rem;
      letter-spacing: .12em;
      text-transform: uppercase;
      color: rgba(242,235,221,.38);
      margin-bottom: .4rem;
    }
    .progress-bar {
      height: 6px;
      border-radius: 3px;
      background: rgba(255,255,255,.07);
      overflow: hidden;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--gold), rgba(200,168,75,.5));
      border-radius: 3px;
      transition: width 1s cubic-bezier(.4,0,.2,1);
    }

    /* â”€â”€ CONTAINER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .wrap { max-width: 820px; margin: 0 auto; padding: 0 1rem 5rem; }

    .section-head {
      font-family: 'Bodoni Moda', serif;
      font-size: 1.15rem;
      font-weight: 700;
      color: var(--gold);
      letter-spacing: .06em;
      margin: 2.8rem 0 1.1rem;
      display: flex;
      align-items: center;
      gap: .8rem;
    }
    .section-head::after {
      content: '';
      flex: 1;
      height: 1px;
      background: linear-gradient(90deg, var(--gold-line), transparent);
    }

    /* â”€â”€ GIORNO CARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .giorno {
      border: 1px solid rgba(255,255,255,.07);
      border-radius: var(--radius);
      margin-bottom: .65rem;
      overflow: hidden;
      background: rgba(255,255,255,.03);
      transition: border-color .25s, background .25s;
      animation: fadeSlide .45s ease both;
    }
    .giorno:hover { border-color: var(--gold-line); background: rgba(255,255,255,.055); }

    .giorno-head {
      display: flex;
      align-items: center;
      padding: .9rem 1.2rem;
      cursor: pointer;
      gap: .8rem;
      user-select: none;
    }
    .g-date {
      font-family: 'Libre Baskerville', serif;
      font-style: italic;
      font-size: 1rem;
      color: var(--gold);
      min-width: 110px;
    }
    .g-score-row {
      flex: 1;
      display: flex;
      align-items: baseline;
      gap: .55rem;
    }
    .g-player { font-size: .6rem; letter-spacing: .1em; text-transform: uppercase; color: rgba(242,235,221,.4); }
    .g-n {
      font-size: 1.55rem;
      font-weight: 300;
      color: var(--cream);
      font-variant-numeric: tabular-nums;
      line-height: 1;
    }
    .g-n.hi { color: var(--gold); font-weight: 500; }
    .g-n.lo { color: rgba(242,235,221,.28); }
    .g-dash { color: rgba(242,235,221,.2); }
    .g-meta { font-size: .6rem; letter-spacing: .1em; text-transform: uppercase; color: rgba(242,235,221,.28); }
    .g-arrow { color: rgba(200,168,75,.38); font-size: .7rem; transition: transform .3s; }
    .giorno.open .g-arrow { transform: rotate(180deg); }

    /* Accordion */
    .giorno-body { max-height: 0; overflow: hidden; transition: max-height .4s ease; }
    .giorno.open .giorno-body { max-height: 2000px; }

    .match-list {
      border-top: 1px solid rgba(255,255,255,.06);
      padding: .5rem 1.2rem .9rem;
    }
    .match-row {
      display: grid;
      grid-template-columns: 1.5rem 1fr auto auto auto 1fr auto;
      align-items: center;
      gap: .5rem;
      padding: .42rem 0;
      border-bottom: 1px solid rgba(255,255,255,.04);
      font-size: .76rem;
    }
    .match-row:last-child { border-bottom: none; }
    .m-num { color: rgba(242,235,221,.22); font-size: .62rem; }
    .m-name { color: rgba(242,235,221,.55); }
    .m-name.vince { color: var(--cream); font-weight: 500; }
    .m-score {
      font-variant-numeric: tabular-nums;
      font-size: .88rem;
      color: var(--cream);
      text-align: right;
    }
    .m-score.w { color: var(--gold); }
    .m-score.l { color: rgba(242,235,221,.3); }
    .m-sep { color: rgba(242,235,221,.18); font-size: .65rem; text-align: center; }
    .m-badge {
      font-size: .58rem;
      padding: .12rem .42rem;
      border-radius: 3px;
      letter-spacing: .07em;
      text-align: center;
    }
    .badge-g { background: rgba(200,168,75,.14); color: var(--gold); border: 1px solid rgba(200,168,75,.28); }
    .badge-z { background: rgba(191,48,48,.12);  color: #e07070;     border: 1px solid rgba(191,48,48,.25); }

    /* â”€â”€ STATO (loading / errore / vuoto) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .stato {
      border: 1px solid rgba(255,255,255,.07);
      border-radius: var(--radius);
      padding: 3rem 2rem;
      text-align: center;
    }
    .stato-icon { font-size: 2.5rem; display: block; margin-bottom: .9rem; }
    .stato-msg {
      font-family: 'Libre Baskerville', serif;
      font-style: italic;
      font-size: 1.1rem;
      color: rgba(242,235,221,.45);
    }
    .stato-sub { font-size: .65rem; letter-spacing: .12em; text-transform: uppercase; color: rgba(242,235,221,.22); margin-top: .5rem; }
    .dot { display: inline-block; animation: blink 1.3s infinite; color: var(--gold); }
    .dot:nth-child(2) { animation-delay: .2s; }
    .dot:nth-child(3) { animation-delay: .4s; }

    /* â”€â”€ FOOTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    footer {
      text-align: center;
      padding: 1.5rem 1rem 2.5rem;
      font-size: .6rem;
      letter-spacing: .16em;
      text-transform: uppercase;
      color: rgba(242,235,221,.18);
    }
    footer .f-suits { display: block; color: var(--gold); opacity: .3; font-size: .9rem; letter-spacing: .8rem; margin-bottom: .4rem; }

    /* â”€â”€ ANIMATIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(14px); }
      to   { opacity: 1; transform: translateY(0);   }
    }
    @keyframes fadeSlide {
      from { opacity: 0; transform: translateX(-10px); }
      to   { opacity: 1; transform: translateX(0);    }
    }
    @keyframes blink {
      0%, 80%, 100% { opacity: .2; }
      40%           { opacity: 1;  }
    }

    /* â”€â”€ RESPONSIVE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    @media (max-width: 580px) {
      .scoreboard { grid-template-columns: 1fr; }
      .player-panel:first-child { border-radius: var(--radius) var(--radius) 0 0; border-right: 1px solid var(--gold-line); border-bottom: none; text-align: left; }
      .vs-block { border-left: 1px solid var(--gold-line); border-right: 1px solid var(--gold-line); border-top: none; border-bottom: none; flex-direction: row; justify-content: space-between; padding: .7rem 1.2rem; }
      .player-panel:last-child { border-radius: 0 0 var(--radius) var(--radius); border-left: 1px solid var(--gold-line); border-top: none; }
      .p-wins { font-size: 3.5rem; }
      .match-row { grid-template-columns: 1.2rem 1fr auto auto auto; }
      .match-row .m-name:last-of-type, .match-row .m-badge { display: none; }
    }
  </style>
</head>
<body>

<!-- HEADER -->
<header>
  <div class="deco-suits">â™  â™¥ â™¦ â™£</div>
  <h1>Burraco Battle<em>Ginola Â· Zappa</em></h1>
  <div class="ornament">
    <div class="ornament-line"></div>
    <div class="ornament-diamond">â—†</div>
    <div class="ornament-line"></div>
  </div>
</header>

<div class="update-bar">
  Aggiornato: <b id="ts">â€”</b> &nbsp;Â·&nbsp; refresh automatico ogni ora
</div>

<!-- SCOREBOARD -->
<div class="scoreboard" id="sb">
  <div class="player-panel" id="panel-g">
    <div class="p-nick">ginola700</div>
    <div class="p-wins" id="g-wins">â€”</div>
    <div class="p-label">vittorie totali</div>
    <div class="p-extra" id="g-extra">&nbsp;</div>
  </div>
  <div class="vs-block">
    <div class="vs-word">vs</div>
    <div class="vs-count"><b id="tot-matches">â€”</b>partite</div>
  </div>
  <div class="player-panel" id="panel-z">
    <div class="p-nick">zappaclaud</div>
    <div class="p-wins" id="z-wins">â€”</div>
    <div class="p-label">vittorie totali</div>
    <div class="p-extra" id="z-extra">&nbsp;</div>
  </div>
</div>

<!-- PROGRESS BAR -->
<div class="progress-wrap">
  <div class="progress-labels">
    <span id="pb-left">ginola700 â€” 0%</span>
    <span id="pb-right">0% â€” zappaclaud</span>
  </div>
  <div class="progress-bar"><div class="progress-fill" id="pb-fill" style="width:50%"></div></div>
</div>

<!-- DAILY LIST -->
<div class="wrap">
  <div class="section-head">â™£ Riepilogo Giornaliero</div>
  <div id="list">
    <div class="stato">
      <span class="stato-icon"><span class="dot">â€¢</span><span class="dot">â€¢</span><span class="dot">â€¢</span></span>
      <p class="stato-msg">Caricamento partite...</p>
      <p class="stato-sub">lettura partite.json</p>
    </div>
  </div>
</div>

<!-- FOOTER -->
<footer>
  <span class="f-suits">â™  â™¥ â™¦ â™£</span>
  dati da burracoepinelle.com Â· aggiornamento automatico via github actions
</footer>

<script>
const P1 = 'ginola700';
const P2 = 'zappaclaud';

/* â”€â”€ RENDER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function renderData(d) {
  const t = d.totali;

  // timestamp
  if (d.aggiornato) {
    const dt = new Date(d.aggiornato);
    document.getElementById('ts').textContent =
      dt.toLocaleDateString('it-IT') + ' Â· ' +
      dt.toLocaleTimeString('it-IT', {hour:'2-digit', minute:'2-digit'}) + ' UTC' +
      (d._demo ? '  âš  dati demo' : '');
  }

  // scoreboard
  document.getElementById('g-wins').textContent = t.ginola_vittorie;
  document.getElementById('z-wins').textContent = t.zappa_vittorie;
  document.getElementById('tot-matches').textContent = t.totale_partite;
  document.getElementById('g-extra').innerHTML =
    `Win rate <b>${t.ginola_pct}%</b> Â· ${t.giorni_giocati} giorni`;
  document.getElementById('z-extra').innerHTML =
    `Win rate <b>${t.zappa_pct}%</b> Â· ${t.giorni_giocati} giorni`;

  // leader crown
  const pg = document.getElementById('panel-g');
  const pz = document.getElementById('panel-z');
  pg.classList.remove('leader'); pz.classList.remove('leader');
  if (t.ginola_vittorie > t.zappa_vittorie) pg.classList.add('leader');
  else if (t.zappa_vittorie > t.ginola_vittorie) pz.classList.add('leader');

  // progress bar
  const gPct = t.totale_partite > 0 ? Math.round(t.ginola_vittorie / t.totale_partite * 100) : 50;
  document.getElementById('pb-fill').style.width = gPct + '%';
  document.getElementById('pb-left').textContent  = `ginola700 â€” ${gPct}%`;
  document.getElementById('pb-right').textContent = `${100 - gPct}% â€” zappaclaud`;

  // lista giorni
  const list = document.getElementById('list');
  if (!d.per_giorno || d.per_giorno.length === 0) {
    list.innerHTML = `<div class="stato">
      <span class="stato-icon">ğŸƒ</span>
      <p class="stato-msg">Nessuna partita trovata</p>
      <p class="stato-sub">Controlla che scraper.py stia estraendo correttamente</p>
    </div>`;
    return;
  }

  list.innerHTML = '';
  d.per_giorno.forEach((g, idx) => {
    const gV = g.ginola_vittorie, zV = g.zappa_vittorie;
    const gWin = gV > zV, zWin = zV > gV;
    const n = g.n_partite || (gV + zV);

    const card = document.createElement('div');
    card.className = 'giorno';
    card.style.animationDelay = (idx * 0.05) + 's';

    const matchRows = (g.partite || []).map((p, i) => {
      const gw = p.winner === P1;
      return `<div class="match-row">
        <span class="m-num">${i+1}</span>
        <span class="m-name ${gw ? 'vince' : ''}">${P1}</span>
        <span class="m-score ${gw ? 'w' : 'l'}">${p.ginola_score}</span>
        <span class="m-sep">â€”</span>
        <span class="m-score ${!gw ? 'w' : 'l'}">${p.zappa_score}</span>
        <span class="m-name ${!gw ? 'vince' : ''}">${P2}</span>
        <span class="m-badge ${gw ? 'badge-g' : 'badge-z'}">${gw ? 'G' : 'Z'}</span>
      </div>`;
    }).join('');

    card.innerHTML = `
      <div class="giorno-head" onclick="toggle(this)">
        <div class="g-date">${g.data}</div>
        <div class="g-score-row">
          <span class="g-player">gin</span>
          <span class="g-n ${gWin ? 'hi' : zWin ? 'lo' : ''}">${gV}</span>
          <span class="g-dash">â€”</span>
          <span class="g-n ${zWin ? 'hi' : gWin ? 'lo' : ''}">${zV}</span>
          <span class="g-player">zap</span>
        </div>
        <div class="g-meta">${n} partite</div>
        <span class="g-arrow">â–¼</span>
      </div>
      <div class="giorno-body">
        ${matchRows ? '<div class="match-list">' + matchRows + '</div>' : ''}
      </div>`;
    list.appendChild(card);
  });
}

function toggle(head) {
  head.closest('.giorno').classList.toggle('open');
}

/* â”€â”€ DEMO DATA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function demo() {
  return {
    aggiornato: new Date().toISOString(), _demo: true,
    giocatori: [P1, P2],
    totali: { ginola_vittorie:18, zappa_vittorie:14, totale_partite:32,
              giorni_giocati:10, ginola_pct:56.3, zappa_pct:43.7 },
    per_giorno: [
      { data:'15/02/2025', ginola_vittorie:3, zappa_vittorie:1, n_partite:4, partite:[
          {ginola_score:720,zappa_score:410,winner:P1},
          {ginola_score:380,zappa_score:540,winner:P2},
          {ginola_score:610,zappa_score:490,winner:P1},
          {ginola_score:550,zappa_score:390,winner:P1}] },
      { data:'14/02/2025', ginola_vittorie:2, zappa_vittorie:3, n_partite:5, partite:[
          {ginola_score:310,zappa_score:490,winner:P2},
          {ginola_score:620,zappa_score:480,winner:P1},
          {ginola_score:290,zappa_score:430,winner:P2},
          {ginola_score:510,zappa_score:360,winner:P1},
          {ginola_score:270,zappa_score:400,winner:P2}] },
      { data:'12/02/2025', ginola_vittorie:4, zappa_vittorie:2, n_partite:6, partite:[
          {ginola_score:680,zappa_score:420,winner:P1},
          {ginola_score:350,zappa_score:510,winner:P2},
          {ginola_score:590,zappa_score:440,winner:P1},
          {ginola_score:710,zappa_score:390,winner:P1},
          {ginola_score:280,zappa_score:470,winner:P2},
          {ginola_score:440,zappa_score:300,winner:P1}] }
    ]
  };
}

/* â”€â”€ FETCH â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
async function load() {
  try {
    const r = await fetch('partite.json?_=' + Date.now());
    if (!r.ok) throw new Error(r.status);
    renderData(await r.json());
  } catch {
    renderData(demo());
    document.getElementById('ts').textContent += '  â€” âš  partite.json non trovato, mostro dati demo';
  }
}

load();
setInterval(load, 60 * 60 * 1000); // ricarica ogni ora
</script>
</body>
</html>
